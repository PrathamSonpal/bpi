<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPI - Shopping Cart</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font - Inter -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 bg-gray-100">

    <!-- Header -->
    <header class="w-full max-w-6xl bg-white rounded-lg shadow-md p-6 mb-6 flex justify-between items-center">
        <div class="flex items-center space-x-4">
            <!-- Bhavesh Plastic Industry Logo -->
            <img src="https://placehold.co/48x48/007BFF/FFFFFF?text=BPI" alt="Bhavesh Plastic Industry Logo" class="w-12 h-12 rounded-full">
            <h1 class="text-3xl font-bold text-gray-800">Bhavesh Plastic Industry</h1>
        </div>
        <div class="flex items-center space-x-4">
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="order_page.html" class="text-gray-600 hover:text-blue-600 font-medium">Products</a></li>
                    <li><a href="contact.html" class="text-gray-600 hover:text-blue-600 font-medium">Contact</a></li>
                    <li><a href="cart.html" class="text-white bg-blue-600 px-4 py-2 rounded-lg font-bold shadow-md hover:bg-blue-700 transition-colors duration-200">Cart</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content Container -->
    <main class="w-full max-w-4xl bg-white rounded-lg shadow-xl p-8 mb-8">
        <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Your Shopping Cart</h2>
        <div id="cart-content">
            <!-- Cart items will be dynamically inserted here -->
        </div>

        <!-- Cart Summary and Checkout -->
        <div id="cart-summary" class="hidden mt-8 border-t border-gray-200 pt-6">
            <div class="flex justify-between items-center font-bold text-lg mb-4">
                <span>Total:</span>
                <span id="cart-total">₹0.00</span>
            </div>
            <a href="checkout.html" class="block w-full text-center bg-blue-600 text-white font-bold py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200">
                Proceed to Checkout
            </a>
        </div>
        
        <!-- Empty Cart Message -->
        <div id="empty-cart-message" class="text-center text-gray-500 mt-12">
            <p class="text-xl font-semibold mb-4">Your cart is empty.</p>
            <a href="products.html" class="inline-block bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200">
                Start Shopping
            </a>
        </div>
    </main>

    <!-- Footer -->
    <footer class="w-full max-w-6xl text-center text-gray-500 text-sm mt-6">
        &copy; 2024 Bhavesh Plastic Industry. All rights reserved.
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cartContent = document.getElementById('cart-content');
            const cartSummary = document.getElementById('cart-summary');
            const cartTotalEl = document.getElementById('cart-total');
            const emptyCartMessage = document.getElementById('empty-cart-message');

            function getCartFromStorage() {
                const cart = JSON.parse(localStorage.getItem('cart') || '[]');
                return cart;
            }

            function saveCartToStorage(cart) {
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCountInHeader();
            }
            
            function updateCartCountInHeader() {
                // This function would be needed if the header was a shared component.
                // Since each page has its own header, the count will be updated on page load.
            }

            function renderCart() {
                const cart = getCartFromStorage();
                cartContent.innerHTML = '';
                
                if (cart.length === 0) {
                    emptyCartMessage.classList.remove('hidden');
                    cartSummary.classList.add('hidden');
                    return;
                }

                emptyCartMessage.classList.add('hidden');
                cartSummary.classList.remove('hidden');

                cart.forEach(item => {
                    const cartItemEl = document.createElement('div');
                    cartItemEl.className = 'bg-white rounded-lg shadow-md p-4 mb-4 flex items-center justify-between';
                    
                    cartItemEl.innerHTML = `
                        <div class="flex items-center space-x-4">
                            <img src="${item.image}" alt="${item.name}" class="w-16 h-16 rounded-lg object-cover">
                            <div>
                                <h4 class="font-bold text-gray-800">${item.name}</h4>
                                <p class="text-sm text-gray-500">Model: ${item.id}</p>
                                <p class="text-lg font-semibold text-blue-600">₹${(item.price * item.quantity).toFixed(2)}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="quantity-btn bg-gray-200 text-gray-600 px-2 py-1 rounded-lg" data-id="${item.id}" data-action="decrease">-</button>
                            <span class="font-bold text-gray-800">${item.quantity}</span>
                            <button class="quantity-btn bg-gray-200 text-gray-600 px-2 py-1 rounded-lg" data-id="${item.id}" data-action="increase">+</button>
                            <button class="remove-btn bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 ml-4" data-id="${item.id}">Remove</button>
                        </div>
                    `;
                    cartContent.appendChild(cartItemEl);
                });

                updateTotal();
            }

            function updateTotal() {
                const cart = getCartFromStorage();
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                cartTotalEl.textContent = `₹${total.toFixed(2)}`;
            }

            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('quantity-btn')) {
                    const id = e.target.dataset.id;
                    const action = e.target.dataset.action;
                    let cart = getCartFromStorage();
                    const item = cart.find(i => i.id === id);

                    if (item) {
                        if (action === 'increase') {
                            item.quantity += 1;
                        } else if (action === 'decrease' && item.quantity > 1) {
                            item.quantity -= 1;
                        }
                        if (item.quantity < 50) {
                            item.quantity = 50;
                            // You can add a custom message here to inform the user about the minimum quantity
                        }
                        saveCartToStorage(cart);
                        renderCart();
                    }
                }

                if (e.target.classList.contains('remove-btn')) {
                    const id = e.target.dataset.id;
                    let cart = getCartFromStorage();
                    cart = cart.filter(item => item.id !== id);
                    saveCartToStorage(cart);
                    renderCart();
                }
            });

            renderCart();
        });
    </script>
</body>
</html>
